    <form method="post" action="https://secure.authorize.net/gateway/transact.dll"  class="donation-form donation-form-authnet-dpm donation-form-product" tal:attributes="id string:donation-form-product-${view/context/id}">
      <input type="hidden" name="x_recurring_billing" value="FALSE" />
      <input type="hidden" name="x_type" value="AUTH_CAPTURE" />
      <input type="hidden" name="x_description" value="Donation" />
      <input type="hidden" name="x_relay_response" value="TRUE" />
      <input type="hidden" name="x_login" value="" tal:attributes="value view/login_key" />
      <input type="hidden" name="x_relay_url" value="" tal:attributes="value view/relay_url" />
      <input type="hidden" name="x_fp_sequence" value="" tal:attributes="value view/sequence" />
      <input type="hidden" name="x_fp_timestamp" value="" tal:attributes="value view/fingerprint/x_fp_timestamp" />
      <input type="hidden" name="x_fp_hash" value="" tal:attributes="value view/fingerprint/x_fp_hash" />
      <input type="hidden" id="authnet_dpm_fingerprint_url" value="" tal:attributes="value view/fingerprint_url" />
      <input type="hidden" name="c_campaign_id" value="" tal:attributes="value view/campaign_sf_id" />
      <input type="hidden" name="c_product_id" value="" tal:attributes="value view/context/sf_object_id" />
      <input type="hidden" name="c_source_campaign" value="" tal:attributes="value view/context/get_source_campaign" />
      <input type="hidden" name="c_source_url" value="" tal:attributes="value view/context/get_source_url" />
      <input type="hidden" name="c_form_name" value="" tal:attributes="value view/context/id" />

      <fieldset class="fieldset-donation-amount">
        <h3 class="product-name" tal:content="view/context/title" />
        <legend>How Many?</legend>
        <div class="product-price">
          <span class="currency">$</span><span class="value" tal:content="string:${view/context/price}" />
          <em class="description">each</em>
        </div>

        <div class="field field-donation-amount">
   
          <div class="field-amount">
            <div class="field-quantity">
              <label for="c_quantity">or Enter a Quantity</label>
              <input name="c_quantity" type="number" required="required" min="1" pattern="[0-9][0-9]*" tal:attributes="value view/quantity" />
            </div>
            <div class="field-total">
              <label for="x_amount" class="currency">$</label>
              <input name="x_amount" type="text" required="required" readonly="true" min="5" pattern="[0-9][0-9]*" tal:attributes="value view/amount" />
              <div class="visualClear"></div>
            </div>
          </div>
  
          <div class="options">

            <div class="option" tal:repeat="level view/levels">
              <input id="donation-level-xx" type="radio" value="xx"
                tal:attributes="value level; id string:donation-level-${level}" />
              <label for="donation-level-xx" tal:attributes="for string:donation-level-${level}" tal:content="level">xx</label>
            </div>
    
            <div class="clear"></div>
          </div>
 
        </div>

      </fieldset>

      <div class="donation-form-error" tal:condition="view/reason_text">
        <h5>Processing Error</h5>
        <p>There was an issue processing your gift.  The error message from the payment processor was:</p>
        <em><span tal:replace="view/response_text" />: (<span tal:replace="view/reason_code" />) <span tal:replace="view/reason_text/text" /></em>
      </div>   
 
      <fieldset class="fieldset-contact-info after-amount">
        <legend>Contact Info</legend>
        <div class="field field-name">
          <div class="field-inputs">
            <div class="subfield subfield-first-name">
              <input type="text" name="x_first_name" required="required" placeholder="First Name" tal:attributes="value python: view.request.form.get('x_first_name', None)" />
            </div>
            <div class="subfield subfield-last-name">
              <input type="text" name="x_last_name" required="required" placeholder="Last Name" tal:attributes="value python: view.request.form.get('x_last_name', None)" />
            </div>
          </div>
        </div>

        <div class="field field-contact">
          <div class="field-inputs">
            <div class="subfield subfield-email">
              <input type="email" name="x_email" required="required" placeholder="Email" tal:attributes="value python: view.request.form.get('x_email', None)" />
            </div>
            <div class="subfield subfield-phone">
              <input type="text" name="x_phone" placeholder="Phone" tal:attributes="value python: view.request.form.get('x_phone', None)" />
            </div>
            <div class="subfield subfield-email-signup">
              <div class="option">
                <input id="field-email-signup" type="checkbox" name="c_email_signup" checked="checked" value="YES" />
                <label for="field-email-signup">Yes, I would like to receive email updates</label>
              </div>
            </div>
          </div>
        </div>

        <div class="field field-phone">
          <div class="field-inputs">
          </div>
        </div>

      </fieldset>
        
      <fieldset class="after-amount fieldset-honorary collapsed">
        <legend>Honorary / Memorial</legend>
        <div class="field field-is-honorary">
          <input id="authnet-dpm-is-honorary" type="checkbox" name="c_is_honorary" value="true" />
          <label for="authnet-dpm-is-honorary">Yes, this gift is in Honor or in Memory of someone.</label>
          <div class="field-help">If checked, you can specify Honorary/Memorial information on the next page</div>
        </div>
      </fieldset>

      <fieldset class="after-amount fieldset-billing-info">
        <legend>Billing Information</legend>
        
        <div class="field field-credit-card">
          <div class="field-inputs">
            <div class="accepted-cards">
              <div class="discreet">Accepted Cards</div>
              <img src="++theme++ip.theme.fundraising/img/credit-cards.png" alt="Visa, Mastercard, American Express, and Discover" />
            </div>
            <div class="subfield subfield-card-number">
              <input type="text" name="x_card_num" required="required" placeholder="Credit Card Number" />
            </div>
            <div class="subfield subfield-card-cvv">
              <input type="text" name="x_card_ccv" required="required" placeholder="CVV" />
              <div class="field-help">The 3 or 4 digit verification number for your credit card</div>
            </div>

            <div class="subfield subfield-expiration-date">
              <label class="expiration-date">Expiration Date</label>
              <div class="subfield subfield-expiration-month">
                <select class="card-expiration-month" required="true">
                  <option value="">---</option>
                  <option value="01">01: January</option>
                  <option value="02">02: February</option>
                  <option value="03">03: March</option>
                  <option value="04">04: April</option>
                  <option value="05">05: May</option>
                  <option value="06">06: June</option>
                  <option value="07">07: July</option>
                  <option value="08">08: August</option>
                  <option value="09">09: September</option>
                  <option value="10">10: October</option>
                  <option value="11">11: November</option>
                  <option value="12">12: December</option>
                </select>
              </div>
              <div class="subfield subfield-expiration-year">
                <select class="card-expiration-year" required="required">
                  <option value="">---</option>
                  <option value="12">2012</option>
                  <option value="13">2013</option>
                  <option value="14">2014</option>
                  <option value="15">2015</option>
                  <option value="16">2016</option>
                  <option value="17">2017</option>
                  <option value="18">2018</option>
                  <option value="19">2019</option>
                  <option value="20">2020</option>
                </select>
              </div>
              <!-- Javascript should insert the combined MMYY date here -->
              <input type="hidden" name="x_exp_date" />
            </div>
          </div>
        </div>

        <div class="field field-address">
          <div class="field-inputs">
            <div class="subfield subfield-address">
              <input type="text" name="x_address" required="required" placeholder="Street Address" tal:attributes="value python: view.request.form.get('x_address', None)" />
            </div>
            <div class="subfield subfield-city">
              <input type="text" name="x_city" required="required" placeholder="City" tal:attributes="value python: view.request.form.get('x_city', None)" />
            </div>
            <div class="subfield subfield-state">
              <input type="text" placeholder="State" />
              <select name="honorary_state">
                <option value="">---</option>
                <option tal:repeat="state view/states" 
                   tal:attributes="value python: state[0]; selected python: view.request.form.get('x_state', None) == state[0]" 
                   tal:content="python: state[1]">New York</option>
              </select>
            </div>
            <div class="subfield subfield-zip">
              <input type="text" name="x_zip" required="required" placeholder="Zip" tal:attributes="value python: view.request.form.get('x_zip', None)" />
            </div>
            <div class="subfield subfield-country">
              <select name="x_country" required="required">
                <option tal:repeat="country view/countries" 
                        tal:content="python: '%s: %s' % (country[0].upper(), country[1])" 
                        tal:attributes="value python: country[0].upper(); selected python: 'selected' if country[0].upper() == 'US' or country[0].upper() == view.request.get('country', 'No country') else None">United States</option>
              </select>
            </div>
          </div>
        </div>

        
      </fieldset>

      <div class="form-buttons after-amount">
        <input type="submit" value="Submit" />
        <span class="button-loading-indicator" />
      </div>

    </form>
